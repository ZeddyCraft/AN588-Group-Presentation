---
title: 'Survey Data: Properly Prepping, Analyzing, and Modeling For Research'
author: "Lindsay Warrell & Jonathan Zhang"
date: "`r Sys.Date()`"
output: html_document
---

## **Mixed Effects Modeling**

## Objectives

| In this module, we will learn:
| 1. How to clean and manipulate survey data.
| 2. How to calculate descriptive statistics using survey data
| 3. How to determine what type of analyses on survey data.

## **BUT FIRST:**

## **Why Use Survey Data in Anthropology?**

Survey data helps anthropologists:

1.  Understand cultural trends and social behavior.

2.  Collect both quantitative and qualitative data, providing different approaches that analyzing both broad trends and detailed insights within R.

3.  Compare societies/populations across different worlds and time periods.

4.  Quantify ethnographic findings with statistical evidence.

**Example:**

------------------------------------------------------------------------

## **1. Loading and Exploring Data**

We will use a `survey` dataset for this Module. We will need to install some packages needed to run the code and explore it:

```{r}
# First install these packages
library(tidyverse)
library(lterdatasampler)
library(curl)
```

```{r}
# Load the dataset
C<-curl("https://raw.githubusercontent.com/ZeddyCraft/AN588-Group-Presentation/refs/heads/main/AN588%20Survey%20(Responses)%20-%20Cleaned%20Data.csv")
Survey<-read.csv(C)
```

##Cleaning Data

Often, since surveys are filled out by humans, they are often times riddled with human errors that make it difficult to analyze data. Take for example our original survey data:

```{r}
O<-curl("https://raw.githubusercontent.com/ZeddyCraft/AN588-Group-Presentation/refs/heads/main/AN588%20Survey%20(Responses)%20-%20Form%20Responses%201.csv")
os<-read.csv(O)
head(os)
```

The initial instructions said to answer height in inches yet people answered in feet. There's also a lot of variation in the answers like how some people added units (such as in, ", or inches). If you look at the major column, you'll see people with the same major answer the question in different ways (for example, one person put "CS" while another put "Computer Science"). So how do we make this data analyzable? We have to clean it! 

First, pick a format and change all of the data to follow it. For example, let's say you want your height to be exclusively a number with no units attached to it. You then need to manually go through each entry in that column and edit it to match.

If you find that the dataset is still not working even after cleaning it, you will likely have to clean it again. Here's a couple of things to look for:
1. Is all of the data spelled correctly?
2. Is all of the data actually in the same format?
3. Are entries that are supposed to be the same or similar actually the same or similar?
4. Check to make sure all of the capitalization is the same.
5. Check to make sure there are no spaces at the end of words or that those spaces are consistent.

###Challenge 1

Looking at the given dataset, choose two columns and decide how you would clean it. 

##Qualitative Statistics

One of the most useful parts of surveys is qualitative statistics or data represented by words or phrases, not numbers. Take for example, the "Favorite_Color" column, based on the prompt "What is your favorite color". 

```{r}
head(Survey$Favorite_Color)
```
How can we organize this data? How can we analyze it? Traditional methods of data visualization don't work and neither do traditional methods of analysis. One way of data visualization is through word clouds.
Word clouds correlate the frequency of a descriptor with the size of the word in the image, giving us a visual representation of these descriptions. The package wordcloud2 gives us a function "wordcloud2" which lets us create these in r.

```{r}
library(wordcloud2)
#first let's find the frequency (or counts) of each of the color responses in r
t<-table(Survey$Favorite_Color)
wordcloud2(t, size=.8, color=(c("Black","Blue","Brown","Cyan","Green","Pink","Purple","Red","Teal","Yellow")))
```
That's visualization! Now let's try again looking at majors.
```{r}
t2<-table(Survey$Major)
wordcloud2(t2, size=.4, color="random-dark")
```
Another common form of visualization is through graphs! The two most common types of graphs used are pie graphs and bar graphs. Let's make a few graphs using the favorite color of the respondents!
```{r}
ggplot(Survey, aes(x=Favorite_Color, fill=Favorite_Color))+
  geom_bar(show.legend = F)+
  scale_fill_manual(values=c("black","blue","brown","cyan","green","pink","purple","red","turquoise","yellow"))
pie(x=t,col=c("black","blue","brown","cyan","green","pink","purple","red","turquoise","yellow"))
```

Notice how ggplot doesn't have a built-in function for pie graphs. You actually can make pie graphs using ggplot! Here's a good [guide](https://r-graph-gallery.com/piechart-ggplot2.html) on how to do so!
###Challenge 3
Using the pie_crab data set from lterdatasampler make your own data visualizations using the site column.
```{r}
t_crab<-table(pie_crab$site)
wordcloud2(t_crab)
ggplot(pie_crab, aes(x=site,fill=site))+
  geom_bar()
```